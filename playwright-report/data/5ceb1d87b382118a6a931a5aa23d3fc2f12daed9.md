# Test info

- Name: Simplified Authentication Flow >> Navigation to auth page works
- Location: /Users/neo/Developer/mexc-sniper-bot/all-tests/e2e-tests/simplified-auth-flow.spec.ts:61:7

# Error details

```
TimeoutError: page.waitForURL: Timeout 10000ms exceeded.
=========================== logs ===========================
waiting for navigation to "**/auth" until "load"
============================================================
    at /Users/neo/Developer/mexc-sniper-bot/all-tests/e2e-tests/simplified-auth-flow.spec.ts:77:16
```

# Page snapshot

```yaml
- heading "MEXC Sniper Bot" [level=1]
- paragraph: Advanced AI-powered cryptocurrency trading platform for automated sniping of new MEXC listings. Get early access to profitable trading opportunities with intelligent pattern detection.
- button "Get Started"
- button "Sign In"
- text: "ðŸŽ¯ Pattern Detection Advanced AI identifies ready-state patterns (sts:2, st:2, tt:4) with 3.5+ hour advance notice for optimal entry timing. ðŸ¤– Multi-Agent System 5 specialized TypeScript agents work together: Calendar monitoring, Pattern discovery, Symbol analysis, Strategy creation, and Orchestration. ðŸ“Š Real-time Analytics Track profit/loss, win rates, and trading performance with comprehensive transaction history and automated reporting."
- heading "Platform Performance" [level=2]
- text: 99.5% Uptime 3.5hrs Avg. Advance Notice 5 Agents AI Trading System 24/7 Market Monitoring
- heading "How It Works" [level=2]
- text: "1"
- heading "Monitor Listings" [level=3]
- paragraph: AI agents continuously scan MEXC calendar for new listing announcements and pattern detection.
- text: "2"
- heading "Analyze Patterns" [level=3]
- paragraph: Advanced algorithms identify optimal entry signals and market readiness indicators.
- text: "3"
- heading "Execute Trades" [level=3]
- paragraph: Automated execution with configurable take-profit levels and risk management strategies.
- heading "Ready to Start Trading?" [level=2]
- paragraph: Join the future of automated cryptocurrency trading with AI-powered precision.
- button "Sign Up Now"
- button "Open Tanstack query devtools":
  - img
- alert
- button "Open Next.js Dev Tools":
  - img
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import { db } from '@/src/db';
   3 | import { user } from '@/src/db/schema';
   4 | import { eq } from 'drizzle-orm';
   5 |
   6 | // Test configuration
   7 | const TEST_EMAIL = `test-${Date.now()}@example.com`;
   8 | const TEST_PASSWORD = 'TestPass123!';
   9 | const TEST_USERNAME = `testuser${Date.now()}`;
   10 |
   11 | test.describe('Simplified Authentication Flow', () => {
   12 |   let userId: string;
   13 |   
   14 |   test.beforeEach(async ({ page }) => {
   15 |     // Ensure we start from a clean state
   16 |     await page.goto('http://localhost:3008');
   17 |     
   18 |     // Take a screenshot for debugging
   19 |     await page.screenshot({ path: 'debug-initial-load.png', fullPage: true });
   20 |   });
   21 |
   22 |   test.afterEach(async () => {
   23 |     // Clean up test user if created
   24 |     if (userId) {
   25 |       try {
   26 |         await db.delete(user).where(eq(user.id, userId));
   27 |         console.log(`Cleaned up test user: ${userId}`);
   28 |       } catch (error) {
   29 |         console.warn('Cleanup error:', error);
   30 |       }
   31 |     }
   32 |   });
   33 |
   34 |   test('Homepage loads correctly for unauthenticated users', async ({ page }) => {
   35 |     console.log('Testing homepage load for unauthenticated users');
   36 |     
   37 |     // Wait for page to load completely
   38 |     await page.waitForLoadState('networkidle');
   39 |     
   40 |     // Take screenshot for debugging
   41 |     await page.screenshot({ path: 'debug-homepage.png', fullPage: true });
   42 |     
   43 |     // Check if page contains loading state
   44 |     const loadingElement = page.locator('text=Loading...');
   45 |     if (await loadingElement.isVisible()) {
   46 |       console.log('Page is in loading state, waiting...');
   47 |       await loadingElement.waitFor({ state: 'detached', timeout: 10000 });
   48 |     }
   49 |     
   50 |     // Wait for the main heading to appear
   51 |     await page.waitForSelector('h1', { timeout: 10000 });
   52 |     
   53 |     // Verify homepage content
   54 |     await expect(page.locator('h1')).toContainText('MEXC Sniper Bot');
   55 |     await expect(page.locator('text=Get Started')).toBeVisible();
   56 |     await expect(page.locator('text=Sign In')).toBeVisible();
   57 |     
   58 |     console.log('Homepage verification passed');
   59 |   });
   60 |
   61 |   test('Navigation to auth page works', async ({ page }) => {
   62 |     console.log('Testing navigation to auth page');
   63 |     
   64 |     // Wait for page to load
   65 |     await page.waitForLoadState('networkidle');
   66 |     
   67 |     // Skip loading state if present
   68 |     const loadingElement = page.locator('text=Loading...');
   69 |     if (await loadingElement.isVisible()) {
   70 |       await loadingElement.waitFor({ state: 'detached', timeout: 10000 });
   71 |     }
   72 |     
   73 |     // Click "Get Started" button
   74 |     await page.click('text=Get Started');
   75 |     
   76 |     // Wait for navigation
>  77 |     await page.waitForURL('**/auth', { timeout: 10000 });
      |                ^ TimeoutError: page.waitForURL: Timeout 10000ms exceeded.
   78 |     
   79 |     // Verify we're on the auth page
   80 |     await expect(page).toHaveURL(/.*\/auth$/);
   81 |     
   82 |     console.log('Navigation to auth page successful');
   83 |   });
   84 |
   85 |   test('User registration flow', async ({ page }) => {
   86 |     console.log('Testing user registration');
   87 |     
   88 |     // Navigate to auth page
   89 |     await page.goto('http://localhost:3008/auth');
   90 |     await page.waitForLoadState('networkidle');
   91 |     
   92 |     // Take screenshot of auth page
   93 |     await page.screenshot({ path: 'debug-auth-page.png', fullPage: true });
   94 |     
   95 |     // Look for registration form elements
   96 |     const emailInput = page.locator('input[name="email"], input[type="email"]');
   97 |     const passwordInput = page.locator('input[name="password"], input[type="password"]');
   98 |     
   99 |     // Wait for form to be ready
  100 |     await emailInput.waitFor({ timeout: 10000 });
  101 |     
  102 |     // Fill registration form
  103 |     await emailInput.fill(TEST_EMAIL);
  104 |     await passwordInput.fill(TEST_PASSWORD);
  105 |     
  106 |     // Look for name and username fields if they exist
  107 |     const nameInput = page.locator('input[name="name"]');
  108 |     const usernameInput = page.locator('input[name="username"]');
  109 |     
  110 |     if (await nameInput.isVisible()) {
  111 |       await nameInput.fill('Test User');
  112 |     }
  113 |     
  114 |     if (await usernameInput.isVisible()) {
  115 |       await usernameInput.fill(TEST_USERNAME);
  116 |     }
  117 |     
  118 |     // Find and click submit button
  119 |     const submitButton = page.locator('button[type="submit"]:has-text("Sign Up"), button:has-text("Register"), button:has-text("Create Account")');
  120 |     await submitButton.click();
  121 |     
  122 |     // Wait for registration to complete
  123 |     await page.waitForURL('**/dashboard', { timeout: 15000 });
  124 |     
  125 |     // Verify we're on dashboard
  126 |     await expect(page).toHaveURL(/.*\/dashboard$/);
  127 |     
  128 |     // Get user ID for cleanup
  129 |     const users = await db.select().from(user).where(eq(user.email, TEST_EMAIL));
  130 |     if (users.length > 0) {
  131 |       userId = users[0].id;
  132 |       console.log(`User registered successfully with ID: ${userId}`);
  133 |     }
  134 |     
  135 |     console.log('Registration flow completed successfully');
  136 |   });
  137 |
  138 |   test('Authentication state persistence', async ({ page, context }) => {
  139 |     console.log('Testing authentication state persistence');
  140 |     
  141 |     // Register a user first
  142 |     await page.goto('http://localhost:3008/auth');
  143 |     await page.waitForLoadState('networkidle');
  144 |     
  145 |     // Fill and submit registration
  146 |     await page.fill('input[name="email"], input[type="email"]', TEST_EMAIL);
  147 |     await page.fill('input[name="password"], input[type="password"]', TEST_PASSWORD);
  148 |     
  149 |     const nameInput = page.locator('input[name="name"]');
  150 |     if (await nameInput.isVisible()) {
  151 |       await nameInput.fill('Test User');
  152 |     }
  153 |     
  154 |     const usernameInput = page.locator('input[name="username"]');
  155 |     if (await usernameInput.isVisible()) {
  156 |       await usernameInput.fill(TEST_USERNAME);
  157 |     }
  158 |     
  159 |     await page.click('button[type="submit"]:has-text("Sign Up"), button:has-text("Register")');
  160 |     await page.waitForURL('**/dashboard', { timeout: 15000 });
  161 |     
  162 |     // Get user ID for cleanup
  163 |     const users = await db.select().from(user).where(eq(user.email, TEST_EMAIL));
  164 |     if (users.length > 0) {
  165 |       userId = users[0].id;
  166 |     }
  167 |     
  168 |     // Now test navigation - authenticated users should be redirected to dashboard
  169 |     await page.goto('http://localhost:3008');
  170 |     await page.waitForURL('**/dashboard', { timeout: 10000 });
  171 |     
  172 |     // Verify redirect happened
  173 |     await expect(page).toHaveURL(/.*\/dashboard$/);
  174 |     
  175 |     console.log('Authentication state persistence verified');
  176 |   });
  177 |
```